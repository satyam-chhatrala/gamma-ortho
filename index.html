<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamma Ortho Instruments</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        html { scroll-behavior: smooth; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a202c; } /* Tailwind gray-900 */
        ::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 10px; } /* Tailwind gray-600 */
        ::-webkit-scrollbar-thumb:hover { background: #718096; } /* Tailwind gray-500 */
        .nav-link-active { font-weight: 600; color: #ffffff; }
        .input-base-style, .product-quantity-input, .payment-input, .payment-select, .dimension-select, .category-select, .file-input, .country-code-select {
            padding: 0.75rem; /* p-3 */
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #4b5563; /* gray-600 */
            background-color: #374151; /* gray-700 */
            color: #e5e7eb; /* gray-200 */
            width: 100%;
        }
        .product-quantity-input {
             width: 60px;
             padding: 0.5rem;
             text-align: center;
        }
        .country-code-select {
            width: auto; /* Adjust width for country code */
            padding-right: 2rem; /* Add some space for the dropdown arrow */
        }
        .dimension-select, .category-select {
            margin-bottom: 0.75rem; /* mb-3 */
        }
        .file-input {
            padding: 0.5rem; /* Adjust padding for file input */
        }
        .file-input::file-selector-button { /* Style the "Choose Files" button */
            font-weight: 500;
            color: #0ea5e9; /* sky-500 */
            background-color: #374151; /* gray-700 */
            border: none;
            padding: 0.5rem 0.75rem;
            margin-right: 0.75rem;
            border-radius: 0.25rem;
            cursor: pointer;
        }
        .file-input::file-selector-button:hover {
            background-color: #4b5563; /* gray-600 */
        }
        .payment-input::placeholder, .payment-select option, .dimension-select option, .category-select option, .country-code-select option {
            color: #9ca3af; /* gray-400 */
        }
        .order-item-action-button {
            background-color: #ef4444; /* red-500 */
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem; /* text-xs */
            line-height: 1rem;
        }
        .order-item-action-button:hover {
            background-color: #dc2626; /* red-600 */
        }
        #product-search-input { 
            flex-grow: 1; 
            padding-left: 1rem; /* px-4 equivalent */
            padding-right: 1rem; /* px-4 equivalent */
        }
        .payment-option-card {
            background-color: #1f2937; /* gray-800 */
            padding: 1.5rem; /* p-6 */
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); /* shadow-lg */
        }
        .payment-button {
            background-color: #0ea5e9; /* sky-500 */
            color: white;
            font-weight: 600; /* font-semibold */
            padding: 0.75rem 1.5rem; /* px-6 py-3 */
            border-radius: 0.5rem; /* rounded-lg */
            transition: background-color 0.3s;
            width: 100%;
            margin-top: 1rem; /* mt-4 */
        }
        .payment-button:hover {
            background-color: #0284c7; /* sky-600 */
        }
        .product-price-display { 
            font-weight: bold;
            font-size: 1.125rem; /* text-lg */
            color: #38bdf8; /* sky-400 */
            margin-bottom: 0.75rem; /* mb-3 */
        }
        /* Styles for grouped order review */
        .order-product-group {
            background-color: #1f2937; /* gray-800 */
            padding: 1rem; /* p-4 */
            border-radius: 0.5rem; /* rounded-lg */
            margin-bottom: 0.75rem; /* mb-3 */
        }
        .order-variant-item {
            border-top: 1px solid #374151; /* gray-700 */
            padding-top: 0.5rem; /* pt-2 */
            margin-top: 0.5rem; /* mt-2 */
        }
        .order-variant-item:first-child {
            border-top: none;
            padding-top: 0;
            margin-top: 0;
        }
        /* Styles for product type filter */
        #product-filter-options-container { 
            margin-bottom: 1.5rem; 
            padding: 1rem; 
            background-color: #1f2937; 
            border-radius: 0.5rem; 
        }
        #product-filter-options-container h3 {
            font-size: 1.125rem; 
            font-weight: 600; 
            color: #e5e7eb; 
            margin-bottom: 0.75rem; 
        }
        .product-filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem; 
        }
        .product-filter-options label {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.75rem; 
            background-color: #374151; 
            color: #d1d5db; 
            border-radius: 0.375rem; 
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .product-filter-options label:hover {
            background-color: #4b5563; 
        }
        .product-filter-options input[type="checkbox"] {
            margin-right: 0.5rem; 
            accent-color: #0ea5e9; 
        }
        #filter-toggle-button { 
            padding-top: 0.75rem;    /* py-3 */
            padding-bottom: 0.75rem; /* py-3 */
            padding-left: 0.75rem;   /* px-3 */
            padding-right: 0.75rem;  /* px-3 */
            background-color: #374151; 
            border: 1px solid #4b5563; 
            border-radius: 0.375rem; /* Match input */
        }
        #filter-toggle-button:hover {
            background-color: #4b5563; 
        }
        /* Contact form feedback message */
        #contact-form-feedback {
            text-align: center;
            margin-top: 1rem;
            font-size: 0.875rem; /* text-sm */
        }
    </style>
</head>
<body class="bg-black text-gray-200">

    <header class="bg-gray-900 shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-sky-400">Gamma Ortho Instruments</a>
            <div class="space-x-4 hidden md:flex">
                <a href="#home" class="nav-link text-gray-300 hover:text-sky-400 px-3 py-2 rounded-md nav-link-active">Home</a>
                <a href="#products" class="nav-link text-gray-300 hover:text-sky-400 px-3 py-2 rounded-md">Products</a>
                <a href="#order-review" class="nav-link text-gray-300 hover:text-sky-400 px-3 py-2 rounded-md">Review Order</a>
                <a href="#payments" class="nav-link text-gray-300 hover:text-sky-400 px-3 py-2 rounded-md">Payments</a>
                <a href="#about" class="nav-link text-gray-300 hover:text-sky-400 px-3 py-2 rounded-md">About Us</a>
                <a href="#contact" class="nav-link text-gray-300 hover:text-sky-400 px-3 py-2 rounded-md">Contact</a>
            </div>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-300 hover:text-sky-400 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden bg-gray-900 shadow-lg">
            <a href="#home" class="block nav-link text-gray-300 hover:text-sky-400 px-6 py-3 nav-link-active">Home</a>
            <a href="#products" class="block nav-link text-gray-300 hover:text-sky-400 px-6 py-3">Products</a>
            <a href="#order-review" class="block nav-link text-gray-300 hover:text-sky-400 px-6 py-3">Review Order</a>
            <a href="#payments" class="block nav-link text-gray-300 hover:text-sky-400 px-6 py-3">Payments</a>
            <a href="#about" class="block nav-link text-gray-300 hover:text-sky-400 px-6 py-3">About Us</a>
            <a href="#contact" class="block nav-link text-gray-300 hover:text-sky-400 px-6 py-3">Contact</a>
        </div>
    </header>

    <main>
        <section id="home" class="bg-gray-800 text-white py-20 md:py-32">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-bold mb-6 text-white">Gamma Orthopedic Instruments</h1>
                <p class="text-lg md:text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
                    Delivering high-quality, reliable instruments for orthopedic surgeons and healthcare professionals.
                </p>
                <a href="#products" class="bg-sky-500 text-white font-semibold px-8 py-3 rounded-lg shadow-md hover:bg-sky-600 transition duration-300">
                    Explore Our Products
                </a>
            </div>
        </section>

        <section id="products" class="py-16 md:py-24 bg-black">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-100 mb-6">Our Products</h2>
                
                <div class="flex items-center gap-x-3 mb-6 max-w-xl mx-auto">
                    <button id="filter-toggle-button" class="text-gray-200 focus:outline-none focus:ring-2 focus:ring-sky-500">
                        <i class="fas fa-filter"></i>
                    </button>
                    <input type="text" id="product-search-input" placeholder="Search products by name..." class="input-base-style">
                </div>

                <div id="product-filter-options-container" class="product-filter-container max-w-3xl mx-auto hidden">
                    <h3>Filter by Product Type:</h3>
                    <div id="product-type-filter-options" class="product-filter-options">
                        <label><input type="checkbox" class="product-type-filter" value="all" checked> All Products</label>
                        <label><input type="checkbox" class="product-type-filter" value="wire-pin"> Wire and Pin</label>
                        <label><input type="checkbox" class="product-type-filter" value="ao-fixator"> A O-Fixator</label>
                        <label><input type="checkbox" class="product-type-filter" value="jess-fixator"> Jess Fixator</label>
                        <label><input type="checkbox" class="product-type-filter" value="ring-fixator"> Ring Fixator</label>
                        <label><input type="checkbox" class="product-type-filter" value="rail-fixator"> Rail Fixator</label>
                    </div>
                </div>
                
                <div id="product-list-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300" 
                         data-product-id="P001" 
                         data-product-name="Mini Single Pin Clamp" 
                         data-product-type="wire-pin"
                         data-dimensions="2.5mm x 4mm:110,3.0mm x 5mm:120,3.5mm x 6mm:130">
                        <img src="https://storage.googleapis.com/generativeai-downloads/images/1000055418.jpg-19a818c5-0cb7-407f-a282-170fd378fa30" alt="Mini Single Pin Clamp" class="w-full h-64 object-contain p-4 bg-gray-700" onerror="this.onerror=null; this.src='https://placehold.co/600x400/374151/9ca3af?text=Wire/Pin+Product';">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-gray-100 mb-2 product-name">Mini Single Pin Clamp</h3>
                            <p class="product-price-display">Price: <span id="price-display-P001"></span> Rs + <span class="gst-rate-text"></span>% GST</p>
                            <div class="mb-3">
                                <label for="dim-P001" class="block text-sm font-medium text-gray-300 mb-1">Select Dimension:</label>
                                <select id="dim-P001" class="dimension-select"></select>
                            </div>
                            <div class="flex items-center space-x-3">
                                <label for="qty-P001" class="text-sm text-gray-300">Qty:</label>
                                <input type="number" id="qty-P001" min="1" value="1" class="product-quantity-input">
                                <button class="add-to-order-btn inline-block bg-sky-500 text-white px-4 py-2 rounded-lg hover:bg-sky-600 transition duration-300 text-sm flex-grow">Add to cart</button>
                            </div>
                        </div>
                    </div>
                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300" 
                         data-product-id="P004" 
                         data-product-name="K-Wire Stainless Steel" 
                         data-product-type="wire-pin"
                         data-dimensions="1.0mm:50,1.5mm:55,2.0mm:60">
                        <img src="https://placehold.co/600x400/4A5568/E2E8F0?text=K-Wire" alt="K-Wire" class="w-full h-64 object-contain p-4 bg-gray-700">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-gray-100 mb-2 product-name">K-Wire Stainless Steel</h3>
                            <p class="product-price-display">Price: <span id="price-display-P004"></span> Rs + <span class="gst-rate-text"></span>% GST</p>
                            <div class="mb-3">
                                <label for="dim-P004" class="block text-sm font-medium text-gray-300 mb-1">Select Diameter:</label>
                                <select id="dim-P004" class="dimension-select"></select>
                            </div>
                            <div class="flex items-center space-x-3">
                                <label for="qty-P004" class="text-sm text-gray-300">Qty:</label>
                                <input type="number" id="qty-P004" min="1" value="1" class="product-quantity-input">
                                <button class="add-to-order-btn inline-block bg-sky-500 text-white px-4 py-2 rounded-lg hover:bg-sky-600 transition duration-300 text-sm flex-grow">Add to cart</button>
                            </div>
                        </div>
                    </div>
                     <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300" 
                         data-product-id="P005" 
                         data-product-name="A O-Fixator Small Set" 
                         data-product-type="ao-fixator"
                         data-dimensions="Standard:2500,With Carbon Rods:3200">
                        <img src="https://placehold.co/600x400/4A5568/E2E8F0?text=AO-Fixator+Small" alt="AO Fixator Small" class="w-full h-64 object-contain p-4 bg-gray-700">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-gray-100 mb-2 product-name">A O-Fixator Small Set</h3>
                            <p class="product-price-display">Price: <span id="price-display-P005"></span> Rs + <span class="gst-rate-text"></span>% GST</p>
                            <div class="mb-3">
                                <label for="dim-P005" class="block text-sm font-medium text-gray-300 mb-1">Select Type:</label>
                                <select id="dim-P005" class="dimension-select"></select>
                            </div>
                            <div class="flex items-center space-x-3">
                                <label for="qty-P005" class="text-sm text-gray-300">Qty:</label>
                                <input type="number" id="qty-P005" min="1" value="1" class="product-quantity-input">
                                <button class="add-to-order-btn inline-block bg-sky-500 text-white px-4 py-2 rounded-lg hover:bg-sky-600 transition duration-300 text-sm flex-grow">Add to cart</button>
                            </div>
                        </div>
                    </div>
                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300" 
                         data-product-id="P006" 
                         data-product-name="Jess Fixator Tibia" 
                         data-product-type="jess-fixator"
                         data-dimensions="Adult:4500,Pediatric:4000">
                        <img src="https://placehold.co/600x400/4A5568/E2E8F0?text=Jess+Fixator" alt="Jess Fixator" class="w-full h-64 object-contain p-4 bg-gray-700">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-gray-100 mb-2 product-name">Jess Fixator Tibia</h3>
                            <p class="product-price-display">Price: <span id="price-display-P006"></span> Rs + <span class="gst-rate-text"></span>% GST</p>
                            <div class="mb-3">
                                <label for="dim-P006" class="block text-sm font-medium text-gray-300 mb-1">Select Size:</label>
                                <select id="dim-P006" class="dimension-select"></select>
                            </div>
                            <div class="flex items-center space-x-3">
                                <label for="qty-P006" class="text-sm text-gray-300">Qty:</label>
                                <input type="number" id="qty-P006" min="1" value="1" class="product-quantity-input">
                                <button class="add-to-order-btn inline-block bg-sky-500 text-white px-4 py-2 rounded-lg hover:bg-sky-600 transition duration-300 text-sm flex-grow">Add to cart</button>
                            </div>
                        </div>
                    </div>
                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300" 
                         data-product-id="P007" 
                         data-product-name="Ring Fixator (Ilizarov Type)" 
                         data-product-type="ring-fixator"
                         data-dimensions="Full Ring:1200,Half Ring:700">
                        <img src="https://placehold.co/600x400/4A5568/E2E8F0?text=Ring+Fixator" alt="Ring Fixator" class="w-full h-64 object-contain p-4 bg-gray-700">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-gray-100 mb-2 product-name">Ring Fixator (Ilizarov Type)</h3>
                            <p class="product-price-display">Price: <span id="price-display-P007"></span> Rs + <span class="gst-rate-text"></span>% GST</p>
                            <div class="mb-3">
                                <label for="dim-P007" class="block text-sm font-medium text-gray-300 mb-1">Select Component:</label>
                                <select id="dim-P007" class="dimension-select"></select>
                            </div>
                            <div class="flex items-center space-x-3">
                                <label for="qty-P007" class="text-sm text-gray-300">Qty:</label>
                                <input type="number" id="qty-P007" min="1" value="1" class="product-quantity-input">
                                <button class="add-to-order-btn inline-block bg-sky-500 text-white px-4 py-2 rounded-lg hover:bg-sky-600 transition duration-300 text-sm flex-grow">Add to cart</button>
                            </div>
                        </div>
                    </div>
                    <div class="product-card bg-gray-800 rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300" 
                         data-product-id="P008" 
                         data-product-name="Rail Fixator Monolateral" 
                         data-product-type="rail-fixator"
                         data-dimensions="Standard Length:5500,Extended Length:6200">
                        <img src="https://placehold.co/600x400/4A5568/E2E8F0?text=Rail+Fixator" alt="Rail Fixator" class="w-full h-64 object-contain p-4 bg-gray-700">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-gray-100 mb-2 product-name">Rail Fixator Monolateral</h3>
                            <p class="product-price-display">Price: <span id="price-display-P008"></span> Rs + <span class="gst-rate-text"></span>% GST</p>
                            <div class="mb-3">
                                <label for="dim-P008" class="block text-sm font-medium text-gray-300 mb-1">Select Length:</label>
                                <select id="dim-P008" class="dimension-select"></select>
                            </div>
                            <div class="flex items-center space-x-3">
                                <label for="qty-P008" class="text-sm text-gray-300">Qty:</label>
                                <input type="number" id="qty-P008" min="1" value="1" class="product-quantity-input">
                                <button class="add-to-order-btn inline-block bg-sky-500 text-white px-4 py-2 rounded-lg hover:bg-sky-600 transition duration-300 text-sm flex-grow">Add to cart</button>
                            </div>
                        </div>
                    </div>

                </div>
                </div>
        </section>

        <section id="order-review" class="py-16 md:py-24 bg-gray-800">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-100 mb-10">Review Order</h2>
                <div class="max-w-3xl mx-auto bg-gray-900 p-8 rounded-xl shadow-lg">
                    
                    <h3 class="text-2xl font-semibold text-gray-100 mb-4">Order Summary</h3>
                    <div id="order-items-container" class="mb-6 space-y-4"> 
                        <p class="text-gray-400 text-center">Your order is currently empty.</p>
                    </div>
                    <div class="border-t border-gray-700 pt-4 mb-2">
                        <p class="text-xl font-semibold text-right text-gray-100">Total (Incl. GST): <span id="order-total" class="text-sky-400">0 Rs</span></p>
                    </div>
                    <div class="text-right mb-6">
                         <button id="clear-order-btn" class="bg-yellow-600 text-white font-semibold px-4 py-2 rounded-lg shadow-md hover:bg-yellow-700 transition duration-300 text-sm">Clear Order</button>
                    </div>


                    <h3 class="text-xl font-semibold text-gray-100 mb-4 mt-8">Your Details:</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="customer-name" class="block text-gray-300 font-medium mb-2">Full Name <span class="text-red-500">*</span></label>
                            <input type="text" id="customer-name" class="input-base-style" placeholder="John Doe" required>
                        </div>
                        <div>
                            <label for="customer-email" class="block text-gray-300 font-medium mb-2">Email Address <span class="text-red-500">*</span></label>
                            <input type="email" id="customer-email" class="input-base-style" placeholder="you@example.com" required>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="customer-mobile" class="block text-gray-300 font-medium mb-2">Mobile Number <span class="text-red-500">*</span></label>
                            <div class="flex">
                                <select id="customer-mobile-code" class="country-code-select mr-2"></select>
                                <input type="tel" id="customer-mobile" class="input-base-style flex-grow" placeholder="9876543210" required>
                            </div>
                        </div>
                        <div>
                            <label for="customer-whatsapp" class="block text-gray-300 font-medium mb-2">WhatsApp Number (Optional)</label>
                             <div class="flex">
                                <select id="customer-whatsapp-code" class="country-code-select mr-2"></select>
                                <input type="tel" id="customer-whatsapp" class="input-base-style flex-grow" placeholder="9876543210">
                            </div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label for="customer-address" class="block text-gray-300 font-medium mb-2">Full Address <span class="text-red-500">*</span></label>
                        <textarea id="customer-address" rows="3" class="input-base-style" placeholder="Street, Area, Landmark" required></textarea>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                         <div>
                            <label for="customer-country" class="block text-gray-300 font-medium mb-2">Country <span class="text-red-500">*</span></label>
                            <select id="customer-country" class="input-base-style" required></select>
                        </div>
                        <div>
                            <label for="customer-state" class="block text-gray-300 font-medium mb-2">State <span class="text-red-500">*</span></label>
                            <select id="customer-state" class="input-base-style" required disabled></select>
                        </div>
                         <div>
                            <label for="customer-city" class="block text-gray-300 font-medium mb-2">City / District <span class="text-red-500">*</span></label>
                            <select id="customer-city" class="input-base-style" required disabled></select>
                        </div>
                    </div>
                     <div class="mb-6">
                        <label for="customer-pincode" class="block text-gray-300 font-medium mb-2">Pincode / Zip Code <span class="text-red-500">*</span></label>
                        <input type="text" id="customer-pincode" class="input-base-style" placeholder="e.g., 123456" required>
                    </div>


                    <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-3 mt-8">
                        <button id="clear-details-btn" class="w-full sm:w-auto bg-orange-600 text-white font-semibold px-4 py-3 rounded-lg shadow-md hover:bg-orange-700 transition duration-300">Clear Details</button>
                        <button id="place-order-btn" class="w-full sm:w-auto bg-green-600 text-white font-semibold px-4 py-3 rounded-lg shadow-md hover:bg-green-700 transition duration-300 flex-grow">Place Order</button>
                    </div>
                     <p id="order-feedback" class="text-center text-sm mt-4"></p>
                </div>
            </div>
        </section>

        <section id="payments" class="py-16 md:py-24 bg-black">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-100 mb-12">Payment Options</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="payment-option-card">
                        <h3 class="text-xl font-semibold text-sky-400 mb-4"><i class="fas fa-qrcode mr-2"></i>Pay via UPI</h3>
                        <p class="text-gray-300 mb-3">Enter your UPI ID or scan a QR code (Illustrative).</p>
                        <input type="text" id="upi-id" class="payment-input mb-3" placeholder="yourname@upi">
                        <img src="https://placehold.co/150x150/374151/9ca3af?text=Scan+QR" alt="UPI QR Code Placeholder" class="mx-auto my-3 rounded-md">
                        <button class="payment-btn payment-button" data-method="UPI">Proceed with UPI</button>
                    </div>
                    <div class="payment-option-card">
                        <h3 class="text-xl font-semibold text-sky-400 mb-4"><i class="fas fa-credit-card mr-2"></i>Pay via Card</h3>
                        <div class="space-y-3">
                            <input type="text" id="card-number" class="payment-input" placeholder="Card Number (e.g., 1234-5678-9012-3456)">
                            <div class="flex space-x-3">
                                <input type="text" id="card-expiry" class="payment-input" placeholder="MM/YY">
                                <input type="text" id="card-cvv" class="payment-input" placeholder="CVV">
                            </div>
                        </div>
                        <button class="payment-btn payment-button" data-method="Card">Pay with Card</button>
                    </div>
                    <div class="payment-option-card">
                        <h3 class="text-xl font-semibold text-sky-400 mb-4"><i class="fas fa-university mr-2"></i>Pay via Net Banking</h3>
                        <p class="text-gray-300 mb-3">Select your bank from the list below (Illustrative).</p>
                        <select id="netbanking-bank" class="payment-select mb-3">
                            <option value="">-- Select Bank --</option>
                            <option value="HDFC">HDFC Bank</option>
                            <option value="ICICI">ICICI Bank</option>
                            <option value="SBI">State Bank of India</option>
                            <option value="AXIS">Axis Bank</option>
                            <option value="KOTAK">Kotak Mahindra Bank</option>
                        </select>
                        <button class="payment-btn payment-button" data-method="Net Banking">Proceed with Net Banking</button>
                    </div>
                    <div class="payment-option-card">
                        <h3 class="text-xl font-semibold text-sky-400 mb-4"><i class="fas fa-clock mr-2"></i>Pay Later</h3>
                        <p class="text-gray-300 mb-3">Opt to complete your payment later. We will contact you with further details.</p>
                        <button class="payment-btn payment-button" data-method="Pay Later">Choose Pay Later</button>
                    </div>
                </div>
                <p id="payment-feedback" class="text-center text-sm mt-8"></p>
            </div>
        </section>

        <section id="about" class="py-16 md:py-24 bg-gray-900">
             <div class="container mx-auto px-6">
                <div class="max-w-4xl mx-auto text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-100 mb-8">About Gamma Ortho Instruments</h2>
                    <p class="text-gray-300 leading-relaxed mb-6">
                        Gamma Ortho Instruments is dedicated to advancing orthopedic surgery through innovative and high-quality instruments. Our commitment to excellence ensures that every product we offer meets the highest standards of precision, durability, and reliability. Our mission is to empower healthcare professionals with the tools they need to achieve optimal patient outcomes.
                    </p>
                    <p class="text-gray-300 leading-relaxed">GSTN: 24ABCFG6367R1ZR</p>
                    </div>
            </div>
        </section>

        <section id="contact" class="py-16 md:py-24 bg-black">
            <div class="container mx-auto px-6">
                 <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-100 mb-12">For Inquiry, contact us</h2>
                <div class="max-w-2xl mx-auto bg-gray-800 p-8 rounded-xl shadow-lg">
                    <form id="inquiry-form"> 
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label for="contact-name" class="block text-gray-300 font-medium mb-2">Full Name</label>
                                <input type="text" id="contact-name" name="contact-name" class="input-base-style" placeholder="John Doe" required>
                            </div>
                            <div>
                                <label for="contact-email" class="block text-gray-300 font-medium mb-2">Email Address</label>
                                <input type="email" id="contact-email" name="contact-email" class="input-base-style" placeholder="you@example.com" required>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label for="contact-mobile" class="block text-gray-300 font-medium mb-2">Mobile Number</label>
                                <input type="tel" id="contact-mobile" name="contact-mobile" class="input-base-style" placeholder="+91-9876543210" required>
                            </div>
                            <div>
                                <label for="contact-whatsapp" class="block text-gray-300 font-medium mb-2">WhatsApp Number (Optional)</label>
                                <input type="tel" id="contact-whatsapp" name="contact-whatsapp" class="input-base-style" placeholder="+91-9876543210">
                            </div>
                        </div>
                        <div class="mb-6">
                            <label for="contact-hospital" class="block text-gray-300 font-medium mb-2">Hospital/Clinic (Optional)</label>
                            <input type="text" id="contact-hospital" name="contact-hospital" class="input-base-style" placeholder="City General Hospital">
                        </div>
                        <div class="mb-6">
                            <label for="contact-category" class="block text-gray-300 font-medium mb-2">Category</label>
                            <select id="contact-category" name="contact-category" class="category-select input-base-style" required>
                                <option value="">-- Select Category --</option>
                                <option value="product_related">Product Related</option>
                                <option value="payment_related">Payment Related</option>
                                <option value="delivery_related">Delivery Related</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="mb-6">
                            <label for="contact-message" class="block text-gray-300 font-medium mb-2">Message</label>
                            <textarea id="contact-message" name="contact-message" rows="5" class="input-base-style" placeholder="Your inquiry or message..." required></textarea>
                        </div>
                        <div class="mb-6">
                            <label for="contact-files" class="block text-gray-300 font-medium mb-2">Attach Files (Optional)</label>
                            <input type="file" id="contact-files" name="contact-files[]" class="file-input input-base-style" multiple>
                            <p class="text-xs text-gray-400 mt-1">You can select multiple files. Max 5MB each.</p>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="bg-sky-600 text-white font-semibold px-8 py-3 rounded-lg shadow-md hover:bg-sky-700 transition duration-300 w-full md:w-auto">
                                Send Inquiry
                            </button>
                        </div>
                    </form>
                    <p id="contact-form-feedback" class="contact-form-feedback"></p>
                    <div class="mt-10 text-center text-gray-300">
                        <p class="text-lg font-medium">Or reach us directly:</p>
                        <p class="mt-2"><i class="fas fa-phone-alt mr-2 text-sky-400"></i> +91-99986 00047</p>
                        <p class="mt-1"><a href="https://wa.me/919998600047" target="_blank" class="hover:text-sky-300"><i class="fab fa-whatsapp mr-2 text-sky-400"></i> +91-99986 00047</a></p>
                        <p class="mt-1"><i class="fas fa-envelope mr-2 text-sky-400"></i> amit_chhatrala@yahoo.com</p>
                        <p class="mt-1"><i class="fas fa-map-marker-alt mr-2 text-sky-400"></i> Plot No. 17, Bhumi Industrial Area - 2, Anand Liner Gate, Veraval - Shapar, Rajkot - 360 024 (Gujarat) India</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-900 text-gray-400 py-12">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; <span id="currentYear"></span> Gamma Ortho Instruments. All rights reserved.</p>
            <p class="text-sm mt-2">Designed with care for the medical community.</p>
        </div>
    </footer>

    <script>
        const GST_RATE = 0.12; // 12% GST, configurable
        const BACKEND_URL = 'https://gamma-ortho.onrender.com'; // <<<< IMPORTANT: REPLACE with your actual deployed backend URL

        // --- Sample Data for Locations and Country Codes ---
        const countryCodes = [
            { name: "IND", code: "+91" },
            { name: "USA", code: "+1" },
            { name: "UK", code: "+44" },
        ];

        const locationData = {
            "India": {
                "Andhra Pradesh": ["Visakhapatnam", "Vijayawada", "Guntur", "Nellore", "Kurnool"],
                "Arunachal Pradesh": ["Itanagar", "Naharlagun", "Pasighat"],
                "Assam": ["Guwahati", "Dibrugarh", "Silchar", "Jorhat"],
                "Bihar": ["Patna", "Gaya", "Bhagalpur", "Muzaffarpur"],
                "Chhattisgarh": ["Raipur", "Bhilai", "Korba", "Bilaspur"],
                "Goa": ["Panaji", "Margao", "Vasco da Gama"],
                "Gujarat": ["Ahmedabad", "Surat", "Vadodara", "Rajkot", "Bhavnagar", "Jamnagar", "Junagadh", "Gandhinagar", "Anand", "Mehsana"],
                "Haryana": ["Faridabad", "Gurugram", "Panipat", "Ambala", "Yamunanagar", "Rohtak", "Hisar"],
                "Himachal Pradesh": ["Shimla", "Solan", "Dharamshala", "Kullu", "Mandi", "Palampur"],
                "Jharkhand": ["Ranchi", "Jamshedpur", "Dhanbad", "Bokaro Steel City", "Deoghar"],
                "Karnataka": ["Bengaluru", "Hubballi-Dharwad", "Mysuru", "Mangaluru", "Belagavi", "Davanagere", "Ballari"],
                "Kerala": ["Thiruvananthapuram", "Kochi", "Kozhikode", "Thrissur", "Kollam", "Alappuzha"],
                "Madhya Pradesh": ["Indore", "Bhopal", "Jabalpur", "Gwalior", "Ujjain", "Sagar", "Rewa"],
                "Maharashtra": ["Mumbai", "Pune", "Nagpur", "Thane", "Nashik", "Aurangabad", "Solapur", "Amravati", "Navi Mumbai"],
                "Manipur": ["Imphal", "Thoubal", "Bishnupur", "Churachandpur"],
                "Meghalaya": ["Shillong", "Tura", "Nongstoin", "Jowai"],
                "Mizoram": ["Aizawl", "Lunglei", "Saiha", "Champhai"],
                "Nagaland": ["Kohima", "Dimapur", "Mokokchung", "Tuensang"],
                "Odisha": ["Bhubaneswar", "Cuttack", "Rourkela", "Puri", "Sambalpur", "Berhampur"],
                "Punjab": ["Ludhiana", "Amritsar", "Jalandhar", "Patiala", "Bathinda", "Mohali"],
                "Rajasthan": ["Jaipur", "Jodhpur", "Kota", "Bikaner", "Udaipur", "Ajmer", "Alwar"],
                "Sikkim": ["Gangtok", "Namchi", "Mangan", "Geyzing"],
                "Tamil Nadu": ["Chennai", "Coimbatore", "Madurai", "Tiruchirappalli", "Salem", "Tirunelveli", "Erode"],
                "Telangana": ["Hyderabad", "Warangal", "Nizamabad", "Karimnagar", "Ramagundam", "Khammam"],
                "Tripura": ["Agartala", "Udaipur (Tripura)", "Dharmanagar", "Kailasahar"],
                "Uttar Pradesh": ["Lucknow", "Kanpur", "Ghaziabad", "Agra", "Meerut", "Varanasi", "Prayagraj", "Noida", "Bareilly"],
                "Uttarakhand": ["Dehradun", "Haridwar", "Roorkee", "Haldwani", "Rudrapur", "Kashipur"],
                "West Bengal": ["Kolkata", "Howrah", "Asansol", "Siliguri", "Durgapur", "Bardhaman", "Malda"],
                "Andaman and Nicobar Islands": ["Port Blair", "Car Nicobar", "Mayabunder"],
                "Chandigarh": ["Chandigarh"],
                "Dadra and Nagar Haveli and Daman and Diu": ["Daman", "Silvassa", "Diu"],
                "Lakshadweep": ["Kavaratti", "Agatti", "Amini", "Andrott"],
                "Delhi (National Capital Territory)": ["New Delhi", "North Delhi", "South Delhi", "East Delhi", "West Delhi", "Central Delhi"],
                "Puducherry": ["Puducherry", "Karaikal", "Yanam", "Mahe"],
                "Ladakh": ["Leh", "Kargil"],
                "Jammu and Kashmir": ["Srinagar", "Jammu", "Anantnag", "Baramulla", "Udhampur"]
            },
            "USA": { 
                "California": ["Los Angeles", "San Francisco", "San Diego", "Sacramento", "Oakland", "Fresno", "Long Beach"],
                "New York": ["New York City", "Buffalo", "Rochester", "Albany", "Syracuse", "Yonkers"],
                "Texas": ["Houston", "Dallas", "Austin", "San Antonio", "Fort Worth", "El Paso"]
            },
            "UK": { 
                "England": ["London", "Manchester", "Birmingham", "Liverpool", "Bristol", "Leeds", "Sheffield"],
                "Scotland": ["Edinburgh", "Glasgow", "Aberdeen", "Dundee"],
                "Wales": ["Cardiff", "Swansea", "Newport"]
            }
        };

        // --- Populate Dimension Dropdowns and Set Initial Price ---
        function populateDimensionDropdowns() {
            document.querySelectorAll('.product-card').forEach(card => {
                const dimensionsData = card.dataset.dimensions;
                const productId = card.dataset.productId;
                const selectElement = card.querySelector(`#dim-${productId}`);
                const priceDisplayElement = card.querySelector(`#price-display-${productId}`); 
                const gstRateTextElements = card.querySelectorAll('.gst-rate-text');


                if (dimensionsData && selectElement && priceDisplayElement) {
                    gstRateTextElements.forEach(el => el.textContent = (GST_RATE * 100).toFixed(0));

                    const dimensionsArray = dimensionsData.split(',');
                    selectElement.innerHTML = ''; 

                    dimensionsArray.forEach((dimPricePair, index) => {
                        const parts = dimPricePair.split(':');
                        const dimensionName = parts[0].trim();
                        const basePrice = parseFloat(parts[1].trim());

                        const option = document.createElement('option');
                        option.value = dimensionName;
                        option.textContent = dimensionName;
                        option.dataset.basePrice = basePrice; 
                        selectElement.appendChild(option);

                        if (index === 0) { 
                            priceDisplayElement.textContent = basePrice.toFixed(2);
                        }
                    });
                    selectElement.addEventListener('change', function() {
                        const selectedOption = this.options[this.selectedIndex];
                        const basePrice = parseFloat(selectedOption.dataset.basePrice);
                        priceDisplayElement.textContent = basePrice.toFixed(2);
                    });
                }
            });
        }

        // --- Populate Country Code Dropdowns ---
        function populateCountryCodeDropdowns() {
            const mobileCodeSelect = document.getElementById('customer-mobile-code');
            const whatsappCodeSelect = document.getElementById('customer-whatsapp-code');
            
            [mobileCodeSelect, whatsappCodeSelect].forEach(select => {
                if (select) {
                    select.innerHTML = ''; 
                    countryCodes.forEach(country => {
                        const option = document.createElement('option');
                        option.value = country.code;
                        option.textContent = `${country.name} (${country.code})`;
                        select.appendChild(option);
                    });
                    const defaultIndia = countryCodes.find(c => c.name === "IND");
                    if (defaultIndia) {
                        select.value = defaultIndia.code;
                    }
                }
            });
        }


        // --- Populate Country, State, City/District Dropdowns ---
        const countrySelect = document.getElementById('customer-country');
        const stateSelect = document.getElementById('customer-state');
        const citySelect = document.getElementById('customer-city'); 

        function populateCountries() {
            if (!countrySelect) return;
            countrySelect.innerHTML = '<option value="">-- Select Country --</option>';
            for (const country in locationData) {
                const option = document.createElement('option');
                option.value = country;
                option.textContent = country;
                countrySelect.appendChild(option);
            }
            if (locationData["India"]) {
                countrySelect.value = "India";
                populateStates("India"); 
            }
        }

        function populateStates(country) {
            if (!stateSelect || !citySelect) return; 
            stateSelect.innerHTML = '<option value="">-- Select State --</option>';
            citySelect.innerHTML = '<option value="">-- Select City / District --</option>'; 
            stateSelect.disabled = true;
            citySelect.disabled = true;

            if (country && locationData[country]) {
                stateSelect.disabled = false;
                for (const state in locationData[country]) {
                    const option = document.createElement('option');
                    option.value = state;
                    option.textContent = state;
                    stateSelect.appendChild(option);
                }
            }
        }
        
        function populateCities(country, state) { 
            if (!citySelect) return;
            citySelect.innerHTML = '<option value="">-- Select City / District --</option>';
            citySelect.disabled = true;

            if (country && state && locationData[country] && locationData[country][state]) {
                citySelect.disabled = false;
                locationData[country][state].forEach(cityOrDistrict => {
                    const option = document.createElement('option');
                    option.value = cityOrDistrict;
                    option.textContent = cityOrDistrict;
                    citySelect.appendChild(option);
                });
            }
        }


        if (countrySelect) {
            countrySelect.addEventListener('change', function() {
                populateStates(this.value);
            });
        }
        if (stateSelect) {
            stateSelect.addEventListener('change', function() {
                 if (countrySelect) { 
                    populateCities(countrySelect.value, this.value); 
                }
            });
        }

        // --- Product Filter and Search Logic ---
        const productSearchInput = document.getElementById('product-search-input');
        const productTypeFilters = document.querySelectorAll('.product-type-filter');
        const allProductCardsForFilter = Array.from(document.getElementById('product-list-container').getElementsByClassName('product-card'));
        const filterToggleButton = document.getElementById('filter-toggle-button');
        const filterOptionsContainer = document.getElementById('product-filter-options-container');

        filterToggleButton.addEventListener('click', () => {
            filterOptionsContainer.classList.toggle('hidden');
        });


        function applyFilters() {
            const searchTerm = productSearchInput.value.toLowerCase().trim();
            const selectedTypes = [];
            productTypeFilters.forEach(checkbox => {
                if (checkbox.checked && checkbox.value !== 'all') {
                    selectedTypes.push(checkbox.value);
                }
            });

            const showAllCategories = document.querySelector('.product-type-filter[value="all"]').checked || selectedTypes.length === 0;
            const isSearching = searchTerm !== '';

            allProductCardsForFilter.forEach(card => {
                const productNameElement = card.querySelector('.product-name');
                const productName = productNameElement ? productNameElement.textContent.toLowerCase() : '';
                const productType = card.dataset.productType;

                const nameMatchesSearch = productName.includes(searchTerm);
                const categoryMatchesFilter = showAllCategories || selectedTypes.includes(productType);

                if (isSearching) { 
                    if (nameMatchesSearch) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                } else { 
                    if (categoryMatchesFilter) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                }
            });
        }


        productSearchInput.addEventListener('input', applyFilters);
        productTypeFilters.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                if (checkbox.value === 'all' && checkbox.checked) {
                    productTypeFilters.forEach(cb => {
                        if (cb.value !== 'all') cb.checked = false;
                    });
                } else if (checkbox.value !== 'all' && checkbox.checked) {
                    document.querySelector('.product-type-filter[value="all"]').checked = false;
                }
                applyFilters(); 
            });
        });


        // --- E-commerce Logic ---
        let currentOrder = []; // Array of product groups
        const orderItemsContainer = document.getElementById('order-items-container');
        const orderTotalElement = document.getElementById('order-total');
        const placeOrderBtn = document.getElementById('place-order-btn');
        const clearOrderBtn = document.getElementById('clear-order-btn');
        const clearDetailsBtn = document.getElementById('clear-details-btn'); 
        const customerNameInput = document.getElementById('customer-name');
        const customerEmailInput = document.getElementById('customer-email');
        const customerMobileCodeInput = document.getElementById('customer-mobile-code');
        const customerMobileInput = document.getElementById('customer-mobile');
        const customerWhatsappCodeInput = document.getElementById('customer-whatsapp-code');
        const customerWhatsappInput = document.getElementById('customer-whatsapp');
        const customerAddressInput = document.getElementById('customer-address');
        const customerPincodeInput = document.getElementById('customer-pincode');

        const orderFeedback = document.getElementById('order-feedback');
        const companyEmail = 'sales@gammaortho.com'; // Company's email for receiving orders

        function renderOrderSummary() {
            orderItemsContainer.innerHTML = '';
            if (currentOrder.length === 0) {
                orderItemsContainer.innerHTML = '<p class="text-gray-400 text-center">Your order is currently empty.</p>';
                orderTotalElement.textContent = '0.00 Rs';
                placeOrderBtn.disabled = true;
                placeOrderBtn.classList.add('opacity-50', 'cursor-not-allowed');
                clearOrderBtn.disabled = true; 
                clearOrderBtn.classList.add('opacity-50', 'cursor-not-allowed');
                return;
            }
            placeOrderBtn.disabled = false;
            placeOrderBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            clearOrderBtn.disabled = false; 
            clearOrderBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            
            let grandTotal = 0;
            const mainUl = document.createElement('ul');
            mainUl.className = 'space-y-3'; 

            currentOrder.forEach(productGroup => {
                const productLi = document.createElement('li');
                productLi.className = 'order-product-group'; 

                const productNameHeader = document.createElement('h4');
                productNameHeader.className = 'text-lg font-semibold text-gray-100 mb-2';
                productNameHeader.textContent = productGroup.baseProductName;
                productLi.appendChild(productNameHeader);

                const variantsUl = document.createElement('ul');
                variantsUl.className = 'space-y-2 pl-1'; 

                productGroup.variants.forEach(variant => {
                    const variantLi = document.createElement('li');
                    variantLi.className = 'order-variant-item flex justify-between items-center text-sm';
                    
                    const baseSubtotalForVariant = variant.basePrice * variant.quantity;
                    const gstForVariantSubtotal = baseSubtotalForVariant * variant.gstRate;
                    const variantTotalWithGst = variant.priceIncGst * variant.quantity;
                    grandTotal += variantTotalWithGst;

                    variantLi.innerHTML = `
                        <div>
                            <span class="text-gray-300">${variant.dimension}</span>
                            <span class="text-xs text-gray-500 block">Qty: ${variant.quantity}</span>
                            <span class="text-xs text-gray-500 block">
                                Amount: ${baseSubtotalForVariant.toFixed(2)} Rs + GST: ${gstForVariantSubtotal.toFixed(2)} Rs
                            </span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-gray-200 mr-3">${variantTotalWithGst.toFixed(2)} Rs</span>
                            <button class="remove-item-btn order-item-action-button" data-variant-id="${variant.variantId}" title="Remove item">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    `;
                    variantsUl.appendChild(variantLi);
                });
                productLi.appendChild(variantsUl);
                mainUl.appendChild(productLi);
            });

            orderItemsContainer.appendChild(mainUl);
            orderTotalElement.textContent = `${grandTotal.toFixed(2)} Rs`;
        }


        function addItemToOrder(baseProductId, baseProductName, selectedDimension, quantity) {
            const dimensionSelectElement = document.getElementById(`dim-${baseProductId}`);
            const selectedOption = dimensionSelectElement.options[dimensionSelectElement.selectedIndex];
            const basePrice = parseFloat(selectedOption.dataset.basePrice); 
            const priceIncGst = basePrice * (1 + GST_RATE);
            const variantId = `${baseProductId}-${selectedDimension.replace(/\s+/g, '-')}`;

            let productGroup = currentOrder.find(pg => pg.baseProductId === baseProductId);

            if (productGroup) { 
                let variant = productGroup.variants.find(v => v.variantId === variantId);
                if (variant) { 
                    variant.quantity += quantity;
                } else { 
                    productGroup.variants.push({ 
                        variantId: variantId,
                        dimension: selectedDimension,
                        basePrice: basePrice,
                        gstRate: GST_RATE,
                        priceIncGst: priceIncGst, 
                        quantity: quantity 
                    });
                }
            } else { 
                currentOrder.push({
                    baseProductId: baseProductId,
                    baseProductName: baseProductName,
                    variants: [{
                        variantId: variantId,
                        dimension: selectedDimension,
                        basePrice: basePrice,
                        gstRate: GST_RATE,
                        priceIncGst: priceIncGst, 
                        quantity: quantity 
                    }]
                });
            }

            orderFeedback.textContent = `Added ${quantity} x ${baseProductName} (${selectedDimension}) to your cart.`;
            orderFeedback.className = 'text-center text-sm mt-4 text-green-500';
            setTimeout(() => orderFeedback.textContent = '', 3000);
            renderOrderSummary();
        }

        function removeItemFromOrder(variantIdToRemove) {
            let productGroupIndex = -1;
            let variantIndexToRemove = -1;

            for (let i = 0; i < currentOrder.length; i++) {
                variantIndexToRemove = currentOrder[i].variants.findIndex(v => v.variantId === variantIdToRemove);
                if (variantIndexToRemove > -1) {
                    productGroupIndex = i;
                    break;
                }
            }

            if (productGroupIndex > -1 && variantIndexToRemove > -1) {
                const removedItemName = `${currentOrder[productGroupIndex].baseProductName} (${currentOrder[productGroupIndex].variants[variantIndexToRemove].dimension})`;
                currentOrder[productGroupIndex].variants.splice(variantIndexToRemove, 1);

                if (currentOrder[productGroupIndex].variants.length === 0) {
                    currentOrder.splice(productGroupIndex, 1);
                }
                
                orderFeedback.textContent = `Removed ${removedItemName} from your order.`;
                orderFeedback.className = 'text-center text-sm mt-4 text-red-500';
                setTimeout(() => orderFeedback.textContent = '', 3000);
                renderOrderSummary();
            }
        }


        document.querySelectorAll('.add-to-order-btn').forEach(button => {
            button.addEventListener('click', () => {
                const card = button.closest('.product-card');
                const baseProductId = card.dataset.productId;
                const baseProductName = card.dataset.productName;
                const quantityInput = card.querySelector(`#qty-${baseProductId}`);
                const dimensionSelect = card.querySelector(`#dim-${baseProductId}`);
                const quantity = parseInt(quantityInput.value);
                const selectedDimension = dimensionSelect.value;

                if (!selectedDimension) {
                    orderFeedback.textContent = 'Please select a dimension for the product.';
                    orderFeedback.className = 'text-center text-sm mt-4 text-red-500';
                    setTimeout(() => orderFeedback.textContent = '', 3000);
                    return;
                }

                if (quantity > 0) {
                    addItemToOrder(baseProductId, baseProductName, selectedDimension, quantity);
                    quantityInput.value = '1'; 
                } else {
                    orderFeedback.textContent = 'Please enter a valid quantity.';
                    orderFeedback.className = 'text-center text-sm mt-4 text-red-500';
                    setTimeout(() => orderFeedback.textContent = '', 3000);
                }
            });
        });

        orderItemsContainer.addEventListener('click', (event) => {
            const removeButton = event.target.closest('.remove-item-btn');
            if (removeButton) {
                const variantId = removeButton.dataset.variantId;
                removeItemFromOrder(variantId);
            }
        });

        placeOrderBtn.addEventListener('click', async () => { 
            const customerName = customerNameInput.value.trim();
            const customerEmail = customerEmailInput.value.trim();
            const mobileCode = customerMobileCodeInput.value;
            const mobileNumber = customerMobileInput.value.trim();
            const whatsappCode = customerWhatsappCodeInput.value;
            const whatsappNumber = customerWhatsappInput.value.trim();
            const address = customerAddressInput.value.trim();
            const pincode = customerPincodeInput.value.trim();
            const country = countrySelect.value;
            const state = stateSelect.value;
            const city = citySelect.value; 
            
            let errorMessage = "";
            if (currentOrder.length === 0) errorMessage = 'Your order is empty. Please add products first.';
            else if (!customerName) errorMessage = 'Please enter your Full Name.';
            else if (!customerEmail || !/^\S+@\S+\.\S+$/.test(customerEmail)) errorMessage = 'Please enter a valid Email Address.';
            else if (!mobileNumber) errorMessage = 'Please enter your Mobile Number.';
            else if (!address) errorMessage = 'Please enter your Full Address.';
            else if (!pincode) errorMessage = 'Please enter your Pincode / Zip Code.';
            else if (!country) errorMessage = 'Please select your Country.';
            else if (!state || stateSelect.disabled) errorMessage = 'Please select your State.';
            else if (!city || citySelect.disabled) errorMessage = 'Please select your City / District.'; 

            if (errorMessage) {
                orderFeedback.textContent = errorMessage;
                orderFeedback.className = 'text-center text-sm mt-4 text-red-500';
                setTimeout(() => orderFeedback.textContent = '', 4000);
                return;
            }

            const orderPayload = {
                orderItems: currentOrder,
                customerName: customerName,
                customerEmail: customerEmail,
                mobileCode: mobileCode,
                mobileNumber: mobileNumber,
                whatsappCode: whatsappCode,
                whatsappNumber: whatsappNumber,
                address: address,
                city: city,
                state: state,
                country: country,
                pincode: pincode,
                totalOrderValue: orderTotalElement.textContent 
            };
            
            orderFeedback.textContent = 'Processing your order...';
            orderFeedback.className = 'text-center text-sm mt-4 text-sky-400';
            console.log("Sending order to:", `${BACKEND_URL}/api/orders/place-order`); 
            console.log("Order Payload:", JSON.stringify(orderPayload, null, 2));


            try {
                const response = await fetch(`${BACKEND_URL}/api/orders/place-order`, { 
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(orderPayload),
                });
                
                console.log("Response Status:", response.status);
                const responseText = await response.text(); 
                console.log("Raw Response Text:", responseText);


                let result;
                try {
                    result = JSON.parse(responseText); 
                } catch (e) {
                    console.error("Failed to parse response as JSON:", e);
                    orderFeedback.textContent = 'Received an invalid response from the server. Please try again.';
                    orderFeedback.className = 'text-center text-sm mt-4 text-red-500';
                    setTimeout(() => orderFeedback.textContent = '', 7000);
                    return;
                }


                if (response.ok) {
                    orderFeedback.textContent = result.message; 
                    orderFeedback.className = 'text-center text-sm mt-4 text-green-500';
                    currentOrder = []; 
                    renderOrderSummary(); 
                } else {
                    orderFeedback.textContent = result.message || `Error: ${response.status} - ${response.statusText}`;
                    orderFeedback.className = 'text-center text-sm mt-4 text-red-500';
                    console.error('Backend error details:', result);
                }
            } catch (error) { 
                console.error('Fetch Error (Network or other issue):', error);
                orderFeedback.textContent = 'An unexpected error occurred. Please check your connection or try again later.';
                orderFeedback.className = 'text-center text-sm mt-4 text-red-500';
            }
            setTimeout(() => orderFeedback.textContent = '', 7000); 
        });

        clearOrderBtn.addEventListener('click', () => {
            currentOrder = [];
            orderFeedback.textContent = 'Order cleared.';
            orderFeedback.className = 'text-center text-sm mt-4 text-red-500';
            setTimeout(() => orderFeedback.textContent = '', 3000);
            renderOrderSummary();
        });

        clearDetailsBtn.addEventListener('click', () => {
            customerNameInput.value = '';
            customerEmailInput.value = '';
            customerMobileInput.value = '';
            customerWhatsappInput.value = '';
            customerAddressInput.value = '';
            customerPincodeInput.value = '';
            if (countrySelect) countrySelect.value = '';
            populateStates(''); 
            orderFeedback.textContent = 'Customer details cleared.';
            orderFeedback.className = 'text-center text-sm mt-4 text-red-500';
            setTimeout(() => orderFeedback.textContent = '', 3000);
        });


        // --- Payment Page Logic ---
        const paymentButtons = document.querySelectorAll('.payment-btn');
        const paymentFeedback = document.getElementById('payment-feedback');

        paymentButtons.forEach(button => {
            button.addEventListener('click', function() {
                const method = this.dataset.method;
                let message = `Thank you for choosing ${method}. This is a demo and no real payment will be processed. We will contact you to confirm your order and payment.`;
                let error = false;

                if (method === "UPI") {
                    const upiId = document.getElementById('upi-id').value;
                    if(upiId.trim() === "") { message = "Please enter a UPI ID for UPI payment."; error = true; }
                } else if (method === "Card") {
                    const cardNumber = document.getElementById('card-number').value;
                    const cardExpiry = document.getElementById('card-expiry').value;
                    const cardCvv = document.getElementById('card-cvv').value;
                    if (!cardNumber || !cardExpiry || !cardCvv) { message = "Please fill in all card details for Card payment."; error = true; }
                } else if (method === "Net Banking") {
                    const selectedBank = document.getElementById('netbanking-bank').value;
                    if (!selectedBank) { message = "Please select a bank for Net Banking."; error = true; }
                }
                
                paymentFeedback.textContent = message;
                paymentFeedback.className = `text-center text-sm mt-8 ${error ? 'text-red-500' : 'text-green-500'}`;
                setTimeout(() => paymentFeedback.textContent = '', error ? 4000 : 5000);
            });
        });

        // --- Contact Form Submission Logic ---
        const inquiryForm = document.getElementById('inquiry-form');
        const contactFormFeedback = document.getElementById('contact-form-feedback');

        if(inquiryForm) {
            inquiryForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                contactFormFeedback.textContent = 'Submitting your inquiry...';
                contactFormFeedback.className = 'contact-form-feedback text-sky-400';

                const formData = new FormData(this);
                // The 'contact-files[]' name in HTML will be handled by multer as req.files
                
                console.log("Sending inquiry to:", `${BACKEND_URL}/api/inquiry/submit`);
                for (var pair of formData.entries()) { // Log FormData entries
                    console.log(pair[0]+ ': '+ pair[1]); 
                }


                try {
                    const response = await fetch(`${BACKEND_URL}/api/inquiry/submit`, {
                        method: 'POST',
                        body: formData, 
                    });
                    
                    console.log("Inquiry Response Status:", response.status);
                    const responseText = await response.text();
                    console.log("Inquiry Raw Response Text:", responseText);

                    let result;
                    try {
                        result = JSON.parse(responseText);
                    } catch (parseError) {
                        console.error("Failed to parse inquiry response as JSON:", parseError);
                        contactFormFeedback.textContent = 'Received an invalid response from the server.';
                        contactFormFeedback.className = 'contact-form-feedback text-red-500';
                        setTimeout(() => contactFormFeedback.textContent = '', 7000);
                        return;
                    }

                    if (response.ok) {
                        contactFormFeedback.textContent = result.message;
                        contactFormFeedback.className = 'contact-form-feedback text-green-500';
                        this.reset(); 
                    } else {
                        contactFormFeedback.textContent = result.message || `Error: ${response.status}`;
                        contactFormFeedback.className = 'contact-form-feedback text-red-500';
                    }
                } catch (error) {
                    console.error('Error submitting inquiry form:', error);
                    contactFormFeedback.textContent = 'An unexpected error occurred. Please try again.';
                    contactFormFeedback.className = 'contact-form-feedback text-red-500';
                }
                setTimeout(() => contactFormFeedback.textContent = '', 7000);
            });
        }


        // --- General Page Logic ---
        const menuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        menuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
        
        const mobileNavLinks = Array.from(mobileMenu.querySelectorAll('a'));
        mobileNavLinks.forEach(link => link.addEventListener('click', () => mobileMenu.classList.add('hidden')));
        
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('main section');
        const header = document.querySelector('header');
        let headerHeight = header ? header.offsetHeight : 70;

        window.addEventListener('resize', () => headerHeight = header ? header.offsetHeight : 70);
        
        function updateActiveNavLink() {
            headerHeight = header ? header.offsetHeight : 70;
            let currentSectionId = 'home'; 
            const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;

            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollPosition >= sectionTop - headerHeight - 20) {
                    currentSectionId = section.getAttribute('id');
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('nav-link-active');
                if (link.getAttribute('href') === `#${currentSectionId}`) {
                    link.classList.add('nav-link-active');
                }
            });
        }
        // Initialize everything on load
        window.addEventListener('load', () => {
            populateDimensionDropdowns(); 
            populateCountryCodeDropdowns();
            populateCountries();
            updateActiveNavLink(); 
            renderOrderSummary(); 
            applyFilters(); 
        });
        window.addEventListener('scroll', updateActiveNavLink); 

    </script>
</body>
</html>
